# USDP 专业版 V3.0.0 技术文档-test

1. # **产品概述**

UCloud Smart Data Platform（简称 USDP）专业版，是 UCloud 推出的智能化、轻量级的大数据基础服务平台，能够帮您快速构建起大数据的分析处理能力。

UCloud基于多年大数据平台开发经验，发布了针对私有化部署场景下的一站式智能大数据平台USDP专业版。其具备构建于 IDC物理服务器、云 IaaS 虚拟服务器的能力，其通过自研的 USDP Manager 管理工具，支持管理多套大数据集群，您可创建资源独享的大数据集群。支持HDFS、Kudu、ES全生态，并在集群中管理Hive、HBase、Spark、Flink、Presto 等开源的大数据组件，如进行集群节点、服务配置、监控告警、故障诊断等智能化的运维管理操作，从而协助您轻松构建和管理大数据业务的分析处理能力。



1. ## **自研管理组件，安全可靠性更高**

USDP作为UCloud大数据团队自主研发的一站式智能大数据平台，其整体架构如下图所示：

​                 ![img](tmp-https://wdcdn.qpic.cn/MTY4ODg1MzY0NTMyNTAyNQ_720279_GucxWj1f0Ycc_ADy_1667893092?w=1280&h=738.1275440976933)        

Manager Server为USDP管理端服务，需配备一个MySQL实例存储集群相关的元数据信息。Agent为USDP从节点控制端服务，用于管理、操作所在节点以及所在节点上的大数据服务。其中BigData Service为各类大数据服务（例如：HDFS、YARN等）。

InfluxDB、Prometheus、Grafana作为监控服务，用于汇总并展示整个集群的监控数据。

USDP支持最少3个节点，集群节点规模无上限限制，同时，允许Manager Server与Agent等相关服务部署在相同的节点上，这样满足大型业务的同时，也尽可能帮助使用者使用较小的成本满足小型业务对数据分析的诉求。



1. # **USDP一站式智能大数据平台的核心优势**

2. 1. ## **无需担心业务绑定**

USDP中所包含的大数据服务、组件，均满足 Apache 2.0开源协议，UCloud大数据团队在做过大量兼容性测试后，积极回馈社区，并将编译后的兼容包全面公开发布。由于本身紧跟开源社区的步伐，使用者可以随时进行自主替换、自主建设、自主数据迁移、集群迁移等，因此无需担心大数据业务与闭源服务绑定。

基于开放式的管理架构，USDP 集成并适配了 30 余款开源的大数据生态开发组件，涵盖数据集成、数据存储、计算引擎、任务调度、权限管理等大数据处理的各个环节。您可以根据自身业务特点和需求，从中选择相应的组件来搭建自己的大数据处理平台。

1. ## **轻松部署方式**

为了能让使用者体验到极简的大数据部署运维、管理方案，USDP提供了丰富详细的部署、一键式环境修复工具及安装部署，并且使用者无需担心安装时准备众多内容，初始化环境只需要简单几步，即可自动完成配置。

USDP 管理服务中提供完善的集群控制及管理功能、提供向导式的操作流程、提供完善的场景创建案例推荐及组件分布推荐。

1. ## **全面丰富的监控指标**

USDP预置的监控指标主要包含三部分内容：

- JMX全量指标采集
- Http常用指标采集
- 自定义指标采集

以上三部分监控数据最终将汇总于USDP的 Promethues中，并在每个服务的概览页面中，展示最常用的监控指标，同时，在Grafana中，通过 USDP官方预置的监控模板（Dashboard），使用者可以查看最详细监控指标。如果USDP预置的监控图标无法满足业务需求，使用者也可以自定义添加所需的监控图表。

1. ## **便捷的告警服务**

USDP提供预置的告警模板，使用者只需要引导进行简单配置，即可实现向不同目标（微信、钉钉、邮件、接口调用等）发送集群指标告警的需求。与监控指标的设计相似，如果使用者认为预置的告警模板无法满足业务需求，也可以自定义对告警模板进行修改，或添加新的告警规则。

1. ## **稳定运行**

USDP 的底层资源为您所独享，大数据集群间可结合业务环境底层虚拟网络，实现了有效的安全隔离。USDP 集成的各个组件编译自 Apache 社区稳定版本，经过了严格的兼容性测试和压力测试，关键性组件都支持高可用特性，确保集群稳定可靠运行。

源自多年的大数据运维经验积淀，USDP 为每款组件预置了完善的监控和告警模板，丰富的监控指标和灵活的告警方式，帮助您及时掌握各个组件的运行状况，进行必要的维护和优化。与此同时，智能化的故障诊断工具和专业的技术支持团队，为您的集群稳定运行保驾护航。

1. ## **成本可控**

UCloud提供了友好且易于部署的管理服务，使用者可一键式操作，无额外的学习成本，大幅降低使用门槛，辅助使用者轻松上手使用和维护大数据业务系统。

针对大数据应用私有化部署场景，支持大数据一体机解决方案，实现一站式交付，开箱即用；支持存算分离架构，易于实现成本优化。

1. ## **灵活的交付模式**

支持USDP纯软件部署交付模式；支持USDP超融合一体机的软硬一体化交付模式。

1. ## **专业的技术支持**

UCloud大数据团队积淀了多年公有云大数据运维和业务调优经验，为使用者提供大数据专家级技术支持及定制化的解决方案能力，并将经验积累智库化，持续不断的更新并集成到产品中为使用者提供自动化服务，解决使用者构建大数据服务的后顾之忧。

1. # **名词解释**

- 实例：大数据组件服务允许实例，例如某主机上的启动的某个 DataNode
- 角色配置组：某一类配置分组，例如 DataNode 配置都归属于默认 DataNode 角色配置组。支持自定义配置项（基于 defalut role group 默认角色组生成）

- UDH：UCloud's Distribution Including Apache Hadoop （UCloud大数据组件发行版）

1. # **功能简介**

2. 1. ## **功能点概述**

- 支持完善的服务器初装时初始化工具；
- 支持友好的Web浏览器管理控制台；
- 支持多集群管理；配合设备网络策略可实现多集群间的访问隔离；
- 支持存储集群与计算集群分离架构；
- 支持集群节点管理，如节点监控、资源私用率、节点状态等；
- 支持集群大数据服务的服务监控、组件管理、组件启停、组件扩展及删除，组件滚动重启；
- 支持丰富的监控模板和视图；
- 支持大数据服务的扩展；
- 支持服务配置文件修改；
- 支持配置文件修改后集群服务自动检测需要重启生效的依赖服务提示；
- 支持各大数据服务Web UIs便捷访问；
- 支持服务异常终止时自动拉起；
- 提供丰富的监控模板，涵盖服务器监控及大数据服务监控等；
- 支持监控模板规则自定义；
- 支持通知组、通知对象管理；
- 支持邮件、微信、钉钉、回调函数等多种告警通知方式；
- 支持控制台与系统配置双向同步；
- 提供丰富的智库和异常修复诊断及建议；
- 支持Dophinschdler 可视化DAG工作流任务调度服务；
- 支持授权证书管理和查看功能；
- 支持服务日志查看及下载；

1. ## **UDH支持的大数据生态服务列表**

UDH-3.0.0 中，已支持的大数据生态服务有：



| **服务**         | **版本** | **描述**                                                     |
| ---------------- | -------- | ------------------------------------------------------------ |
| HDFS             | 3.3.4    | Apache Hadoop 分布式文件系统 (HDFS) 是 Hadoop 应用程序使用的主要存储系统。HDFS 创建多个数据块副本并将它们分布在整个群集的计算主机上，以启用可靠且极其快速的计算功能。 |
| YARN             | 3.3.4    | Apache Hadoop MapReduce 2.0 (MRv2) 或 YARN 是支持 MapReduce 应用程序的数据计算框架（需要 HDFS）。 |
| Hive             | 3.1.3    | Apache Hive 数据仓库软件有助于使用 SQL 读取，写入和管理驻留在分布式存储中的大型数据集。 |
| TEZ              | 0.10.2   | Apache TEZ 是支持 DAG 作业的开源计算框架，它可以将多个有依赖的作业转换为一个作业从而大幅提升 DAG 作业的性能。 |
| HBase            | 2.4.11   | Apache HBase 是 Hadoop Database，是一个高可靠性、高性能、面向列、可伸缩的分布式存储系统。 |
| Phoenix          | 5.1.2    | Apache Phoenix 是 HBase 的 SQL 驱动，Phoenix 使得 HBase 支持通过 JDBC 的方式进行访问，并将你的 SQL 查询转成 HBase 的扫描和相应的动作。 |
| Impala           | 4.1.1    | Apache Impala 分布式计算服务                                 |
| Spark            | 3.2.1    | Apache Spark是一个通用的大数据分析引擎,具有高性能、易用和普遍性等特点。 |
| Hue              | 4.10.0   | Apache Hue 可视化管理服务                                    |
| Sqoop            | 1.4.7    | Apache Sqoop 是一种用来将 Apache Hadoop 和结构化数据存储（如关系数据库）中的数据相互转移的工具。 |
| Flume            | 1.11.0   | Flume是Cloudera提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力。 |
| Kafka            | 2.8.1    | Apache Kafka 是一种高吞吐量的分布式发布订阅消息系统。        |
| Oozie            | 5.2.1    | Oozie 是群集中管理数据处理作业的工作流协调服务               |
| DolphinScheduler | 3.1.0    | Apache DolphinScheduler 是一个分布式易扩展的可视化DAG工作流任务调度开源系统。 |
| Solr             | 8.11.2   | Apache Solr 基于Lucene的流行、高性能的开源企业级搜索平台。   |
| Prometheus       | 2.38.0   | Prometheus 是一个开源的系统监控和报警系统用于拉取大数据平台监控数据。 |
| Ranger           | 2.3.0    | Apache Ranger 授权服务                                       |
| ZooKeeper        | 3.5.10   | Apache ZooKeeper 是用于维护和同步配置数据的集中服务。        |



1. # **规划及安装**

2. 1. ## **资源规划**

本篇参考指南，旨在说明通过USDP私有化部署服务，协助用户来规划大数据服务的部署。用户可参考下文中的部署规模，来规划在您的基础资源及需求场景下，如何规划和利用基础资源，合理规划部署，使整体大数据服务更合理，更好的满足业务需要。

USDP开始安装前，需用户根据目标集群的规模大小做参考，合理规划好USDP所管理的所有资源节点，并通过USDP提供的初始化工具，对首次安装的所有机型进行初始化操作，当安装USDP服务并启动其Web管理控制台后，需要导入相应的License文件，并通过向导的形式，创建好第一个集群后，即可完整使用USDP管理控制台中全部的功能。



**说明：***USDP Server：是用户独享的整个大数据系统的管理服务，提供一键安装包、修复工具、可视化的控制台。安装完成后，用户可通过USDP Server提供的控制台管理整个大数据系统，包括对多个大数据集群的管理。**MySQL：是USDP Server依赖的管理元数据存储数据库。**Hadoop Cluster：是通过USDP控制台创建并管理的1-N个独立的大数据集群。**大数据服务：是Hadoop集群中各个服务软件，例如：HDFS、Hive、Spark、HUE、Atlas等。**服务组件：是各个大数据服务自带的服务构成的模块。如DataNode、NameNode是HDFS服务的两类重要的附件。*



1. ### **最小规模部署**

​                 ![img](tmp-https://wdcdn.qpic.cn/MTY4ODg1MzY0NTMyNTAyNQ_384341_DO6O88GhW1sq8amn_1671035055?w=1037&h=204)        

**本规划方案适用于：**当业务量较小、资源较为紧俏时，以及您希望搭建一个最小规模的环境时。参考本章节内容，来协助实现智能大数据服务的部署参考。
